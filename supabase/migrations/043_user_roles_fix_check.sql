do \nbegin\n  if exists (select 1 from information_schema.constraint_table_usage\n              where table_schema = 'public' and table_name = 'user_roles' and constraint_name = 'user_roles_role_check') then\n    alter table public.user_roles drop constraint user_roles_role_check;\n  end if;\nend;\n\nupdate public.user_roles\nset role = case lower(role)\n  when 'admin' then 'Admin'\n  when 'yonetim' then 'Yonetim'\n  when 'satis' then 'Satis'\n  else 'Admin' end;\n\nalter table public.user_roles\n  add constraint user_roles_role_check\n  check (lower(role) in ('admin','yonetim','satis'));\n
